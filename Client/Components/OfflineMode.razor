@using MVSRA.Client.Modules
@using MVSRA.Shared.EFModels

@inject CookieRepository CookieRepo

<MudText Typo="Typo.h5">Offline Mode</MudText>
<ImageCarousal @bind-Images="@_images"/>
<MudButton ButtonType="ButtonType.Submit" OnClick="SavePage">Save Page</MudButton>

@code {
    private const string IMAGE_COOKIE_KEY = "imageCookie";

    private List<Photo> _images = new();

    protected override async Task OnInitializedAsync()
    {
        _images = await CookieRepo.GetCookieObject<List<Photo>>(IMAGE_COOKIE_KEY) ?? [];
    }

    private async Task SavePage()
    {
        await CookieRepo.SetCookieObject<List<Photo>>(IMAGE_COOKIE_KEY, _images);
    }
}
